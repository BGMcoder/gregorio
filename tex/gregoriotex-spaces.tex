%GregorioTeX file.
%Copyright (C) 2007 Elie Roux <elie.roux@enst-bretagne.fr>
%
%This program is free software: you can redistribute it and/or modify
%it under the terms of the GNU General Public License as published by
%the Free Software Foundation, either version 3 of the License, or
%(at your option) any later version.
%
%This program is distributed in the hope that it will be useful,
%but WITHOUT ANY WARRANTY; without even the implied warranty of
%MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%GNU General Public License for more details.
%
%You should have received a copy of the GNU General Public License
%along with this program.  If not, see <http://www.gnu.org/licenses/>.

% this file contains definitions of spaces

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% macros for the typesetting of spaces
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% null space
\newskip\zerowidthspace
\zerowidthspace=0pt plus 0pt minus 0pt

% space between glyphs in the same element
\newskip\interglyphspace

% space between an alteration (flat or natural) and the next glyph
\newskip\alterationspace

% negative space, difference between the normal space between two notes and the space between a note and a flat
\newskip\beforealterationspace

% space between elements
\newskip\interelementspace

% larger space between elements
\newskip\largerspace

% space between elements which has the size of a note
\newskip\glyphspace

% minimum space between two notes of different syllables
\newskip\intersyllablespace

% space before custo
\newskip\spacebeforecusto

% space before punctum mora and augmentum duplex
\newskip\spacebeforesigns

% space after punctum mora and augmentum duplex
\newskip\spaceaftersigns

% space after a clef at the beginning of a line
\newskip\spaceafterlineclef

% space after at the end of a word when the last written symbol is a note and the first is a note
\newskip\interwordspacenotes

% space after at the end of a word when the last written symbol is a note and the first is text
\newskip\interwordspacenotestext

% space after at the end of a word when the last written symbol is text and the first is a note
\newskip\interwordspacetextnotes

% space after at the end of a word when the last written symbol is text and the first is text
\newskip\interwordspacetext

% space between notes of a bivirga or trivirga
\newskip\bitrivirspace

% space between notes of a bistropha or tristropha
\newskip\bitristrospace

% space between two punctum inclinatum
\newskip\punctuminclinatumshift

% space before puncta inclinata
\newskip\beforepunctainclinatashift

% space between a punctum inclinatum and a punctum inclinatum deminutus
\newskip\punctuminclinatumanddebilisshift

% space between two punctum inclinatum deminutus
\newskip\punctuminclinatumdebilisshift

% space for the bars (inside syllables)
%first for virgula and divisio minima
\newskip\spacearoundsmallbar

%then divisio minor
\newskip\spacearoundminor

%divisio major
\newskip\spacearoundmaior

%divisio finalis
\newskip\spacearoundfinalis

%a special space for finalis, for when it is the last glyph
\newskip\spacebeforefinalfinalis

% the space that will appear around bars that are preceded by a custo and followed by a key.
% well... actually it's the difference between the normal space around bars and the space described previously.
\newskip\spacearoundclefbars

% space between the text and the text of the bar
\newskip\textbartextspace

% minimal space between a note and a bar
\newskip\notebarspace

\newdimen\maximumspacewithoutdash

% an extensible space for the beginning of lines
\newskip\afterclefnospace

% space between the initial and the beginning of the score
\newskip\afterinitialshift
\afterinitialshift=0.6 em plus 0em minus 0em

% space before the initial and the beginning of the score
\newskip\beforeinitialshift
\afterinitialshift=0.6 em plus 0em minus 0em

\def\setspaceafterinitial#1{%
\afterinitialshift=#1 %
\relax %
}

\def\setspacebeforeinitial#1{%
\beforeinitialshift=#1 %
\relax %
}

% space for the clef changes
\newskip\clefchangespace

\def\setgrespaces{%
\interglyphspace = 8200 sp plus 820 sp minus 820 sp%
\multiply\interglyphspace by \grefactor %
%
\alterationspace = 8500 sp plus 1400 sp minus 500 sp%
\multiply\alterationspace by \grefactor %
%
\beforealterationspace = -36000 sp plus 1200 sp minus 1200 sp%
\multiply\beforealterationspace by \grefactor %
%
\interelementspace = 8200 sp plus 1400 sp minus 820 sp%
\multiply\interelementspace by \grefactor %
%
\largerspace = 12200 sp plus 1400 sp minus 820 sp%
\multiply\largerspace by \grefactor %
%
\glyphspace = 30500 sp plus 2000 sp minus 1650 sp%
\multiply\glyphspace by \grefactor %
%
\intersyllablespace=28000 sp plus 3000 sp minus 0 sp%
\multiply\intersyllablespace by \grefactor %
%
\spacebeforecusto = 16500 sp plus 4000 sp minus 1650 sp%
\multiply\spacebeforecusto by \grefactor %
%
\spacebeforesigns=6000 sp plus 500 sp minus 500 sp%
\multiply\spacebeforesigns by \grefactor %
%
\spaceaftersigns=9000 sp plus 900 sp minus 900 sp%
\multiply\spaceaftersigns by \grefactor %
%
\spaceafterlineclef = 16500 sp plus 4000 sp minus 1650 sp%
\multiply\spaceafterlineclef by \grefactor %
%
\interwordspacenotes = 32000 sp plus 6400 sp minus 3200 sp%
\multiply\interwordspacenotes by \grefactor %
%
\interwordspacenotestext = 35000 sp plus 5000 sp minus 2500 sp%
\multiply\interwordspacenotestext by \grefactor %
%
\interwordspacetextnotes = 30000 sp plus 6000 sp minus 3000 sp%
\multiply\interwordspacetextnotes by \grefactor %
%
\interwordspacetext = 25000 sp plus 7000 sp minus 2500 sp%
\multiply\interwordspacetext by \grefactor %
%
\bitrivirspace = 8200 sp plus 820 sp minus 820 sp%
\multiply\bitrivirspace by \grefactor %
%
\bitristrospace = 7000 sp plus 700 sp minus 700 sp%
\multiply\bitristrospace by \grefactor %
%
\punctuminclinatumshift=-2350 sp plus 100 sp minus 100 sp%
\multiply\punctuminclinatumshift by \grefactor %
%
\beforepunctainclinatashift=5800 sp plus 800 sp minus 500 sp%
\multiply\beforepunctainclinatashift by \grefactor %
%
\punctuminclinatumanddebilisshift=-1700 sp plus 100 sp minus 100 sp%
\multiply\punctuminclinatumanddebilisshift by \grefactor %
%
\punctuminclinatumdebilisshift=-100 sp plus 100 sp minus 100 sp%
\multiply\punctuminclinatumdebilisshift by \grefactor %
%
\spacearoundsmallbar = 20000 sp plus 1400 sp minus 1400 sp%
\multiply\spacearoundsmallbar by \grefactor %
%
\spacearoundminor = 20000 sp plus 1400 sp minus 1400 sp%
\multiply\spacearoundminor by \grefactor %
%
\spacearoundmaior = 20000 sp plus 1650 sp minus 1650 sp%
\multiply\spacearoundmaior by \grefactor %
%
\spacearoundfinalis = 20000 sp plus 1650 sp minus 1650 sp%
\multiply\spacearoundfinalis by \grefactor %
%
\spacebeforefinalfinalis= 32000 sp plus 3000 sp minus 16000 sp%
\multiply\spacebeforefinalfinalis by \grefactor %
%
\spacearoundclefbars= 7000 sp plus 100 sp minus 100 sp%
\multiply\spacearoundclefbars by \grefactor %
%
\textbartextspace = 13000 sp plus 1300 sp minus 1300 sp%
\multiply\textbartextspace by \grefactor %
%
\notebarspace = 35000 sp plus 20000 sp minus 3100 sp%
\multiply\notebarspace by \grefactor %
%
\maximumspacewithoutdash = 4000 sp%
\multiply\maximumspacewithoutdash by \grefactor %
%
\afterclefnospace = 0 pt plus 16000 sp minus 0 pt%
\multiply\afterclefnospace by \grefactor %
\relax %
}
