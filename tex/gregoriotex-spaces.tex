%GregorioTeX file.
%Copyright (C) 2007 Elie Roux <elie.roux@enst-bretagne.fr>
%
%This program is free software: you can redistribute it and/or modify
%it under the terms of the GNU General Public License as published by
%the Free Software Foundation, either version 3 of the License, or
%(at your option) any later version.
%
%This program is distributed in the hope that it will be useful,
%but WITHOUT ANY WARRANTY; without even the implied warranty of
%MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%GNU General Public License for more details.
%
%You should have received a copy of the GNU General Public License
%along with this program.  If not, see <http://www.gnu.org/licenses/>.

% this file contains definitions of spaces

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% macros for the typesetting of spaces
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% null space
\newskip\zerowidthspace
\zerowidthspace=0pt plus 0pt minus 0pt

% space between glyphs in the same element
\newskip\interglyphspace

% space between an alteration (flat or natural) and the next glyph
\newskip\alterationspace

% negative space, difference between the normal space between two notes and the space between a note and a flat
\newskip\beforealterationspace

% space between elements
\newskip\interelementspace

% larger space between elements
\newskip\largerspace

% space between elements which has the size of a note
\newskip\glyphspace

% minimum space between two notes of different syllables
\newskip\intersyllablespace

% space before custo
\newskip\spacebeforecusto

% space before punctum mora and augmentum duplex
\newskip\spacebeforesigns

% space after punctum mora and augmentum duplex
\newskip\spaceaftersigns

% space after a clef at the beginning of a line
\newskip\spaceafterlineclef

% space after at the end of a word when the last written symbol is a note and the first is a note
\newskip\interwordspacenotes

% space after at the end of a word when the last written symbol is a note and the first is text
\newskip\interwordspacenotestext

% space after at the end of a word when the last written symbol is text and the first is a note
\newskip\interwordspacetextnotes

% space after at the end of a word when the last written symbol is text and the first is text
\newskip\interwordspacetext

% space between notes of a bistropha and bivirga
\newskip\bispace

% space between notes of a tristropha and trivirga
\newskip\trispace

% space between two punctum inclinatum
\newskip\punctuminclinatumshift

% space before puncta inclinata
\newskip\beforepunctainclinatashift

% space between a punctum inclinatum and a punctum inclinatum deminutus
\newskip\punctuminclinatumanddebilisshift

% space between two punctum inclinatum deminutus
\newskip\punctuminclinatumdebilisshift

% space for the bars
%first for virgula and divisio minima
\newskip\spacebeforesmallbar

\newskip\spaceaftersmallbar

%then divisio minor
\newskip\spacebeforeminor

\newskip\spaceafterminor

%divisio major
\newskip\spacebeforemaior

\newskip\spaceaftermaior

%divisio finalis
\newskip\spacebeforefinalis

%a special space for finalis, for when it is the last glyph
\newskip\spacebeforefinalfinalis

\newskip\spaceafterfinalis

% space between the text and the text of the bar
\newskip\textbartextspace

% minimal space between a note and a bar
\newskip\notebarspace

\newdimen\maximumspacewithoutdash

% an extensible space for the beginning of lines
\newdimen\afterclefnospace

% space between the initial and the beginning of the score
\newskip\afterinitialshift
\afterinitialshift=0.6 em plus 0em minus 0em

% space before the initial and the beginning of the score
\newskip\beforeinitialshift
\afterinitialshift=0.6 em plus 0em minus 0em

\def\setspaceafterinitial#1{%
\afterinitialshift=#1 %
\relax %
}

\def\setspacebeforeinitial#1{%
\beforeinitialshift=#1 %
\relax %
}

% space for the clef changes
\newskip\clefchangespace

\def\setgrespaces{%
\interglyphspace = 8200 sp plus 820 sp minus 820 sp%
\multiply\interglyphspace by \grefactor %
%
\alterationspace = 12000 sp plus 2300 sp minus 1200 sp%
\multiply\alterationspace by \grefactor %
%
\beforealterationspace = -36000 sp plus 1200 sp minus 1200 sp%
\multiply\beforealterationspace by \grefactor %
%
\interelementspace = 8200 sp plus 1400 sp minus 820 sp%
\multiply\interelementspace by \grefactor %
%
\largerspace = 8200 sp plus 1400 sp minus 820 sp%
\multiply\largerspace by \grefactor %
%
\glyphspace = 16500 sp plus 2500 sp minus 1650 sp%
\multiply\glyphspace by \grefactor %
%
\intersyllablespace=28000 sp plus 3000 sp minus 0 sp%
\multiply\intersyllablespace by \grefactor %
%
\spacebeforecusto = 16500 sp plus 16500 sp minus 8000 sp%
\multiply\spacebeforecusto by \grefactor %
%
\spacebeforesigns=5000 sp plus 500 sp minus 500 sp%
\multiply\spacebeforesigns by \grefactor %
%
\spaceaftersigns=9000 sp plus 900 sp minus 900 sp%
\multiply\spaceaftersigns by \grefactor %
%
\spaceafterlineclef = 16500 sp plus 4000 sp minus 1650 sp%
\multiply\spaceafterlineclef by \grefactor %
%
\interwordspacenotes = 32000 sp plus 6400 sp minus 3200 sp%
\multiply\interwordspacenotes by \grefactor %
%
\interwordspacenotestext = 35000 sp plus 5000 sp minus 2500 sp%
\multiply\interwordspacenotestext by \grefactor %
%
\interwordspacetextnotes = 30000 sp plus 6000 sp minus 3000 sp%
\multiply\interwordspacetextnotes by \grefactor %
%
\interwordspacetext = 25000 sp plus 7000 sp minus 2500 sp%
\multiply\interwordspacetext by \grefactor %
%
\bispace = 16500 sp plus 1650 sp minus 1650 sp%
\multiply\bispace by \grefactor %
%
\trispace = 16500 sp plus 1650 sp minus 1650 sp%
\multiply\trispace by \grefactor %
%
\punctuminclinatumshift=-4850 sp plus 100 sp minus 100 sp%
\multiply\punctuminclinatumshift by \grefactor %
%
\beforepunctainclinatashift=5800 sp plus 800 sp minus 500 sp%
\multiply\beforepunctainclinatashift by \grefactor %
%
\punctuminclinatumanddebilisshift=-3000 sp plus 100 sp minus 100 sp%
\multiply\punctuminclinatumanddebilisshift by \grefactor %
%
\punctuminclinatumdebilisshift=-1300 sp plus 100 sp minus 100 sp%
\multiply\punctuminclinatumdebilisshift by \grefactor %
%
\spacebeforesmallbar = 8500 sp plus 1650 sp minus 1650 sp%
\multiply\spacebeforesmallbar by \grefactor %
%
\spaceaftersmallbar = 8500 sp plus 1650 sp minus 1650 sp%
\multiply\spaceaftersmallbar by \grefactor %
%
\spacebeforeminor = 8500 sp plus 1650 sp minus 1650 sp%
\multiply\spacebeforeminor by \grefactor %
%
\spaceafterminor = 8500 sp plus 1650 sp minus 1650 sp%
\multiply\spaceafterminor by \grefactor %
%
\spacebeforemaior = 8500 sp plus 1650 sp minus 1650 sp%
\multiply\spacebeforemaior by \grefactor %
%
\spaceaftermaior = 8500 sp plus 1650 sp minus 1650 sp%
\multiply\spaceaftermaior by \grefactor %
%
\spacebeforefinalis = 8500 sp plus 1650 sp minus 1650 sp%
\multiply\spacebeforefinalis by \grefactor %
%
\spacebeforefinalfinalis= 32000 sp plus 3000 sp minus 16000 sp%
\multiply\spacebeforefinalfinalis by \grefactor %
%
\spaceafterfinalis = 8500 sp plus 1650 sp minus 6000 sp%
\multiply\spaceafterfinalis by \grefactor %
%
\textbartextspace = 13000 sp plus 1300 sp minus 1300 sp%
\multiply\textbartextspace by \grefactor %
%
\notebarspace = 35000 sp plus 20000 sp minus 3100 sp%
\multiply\notebarspace by \grefactor %
%
\maximumspacewithoutdash = 4000 sp%
\multiply\maximumspacewithoutdash by \grefactor %
%
\afterclefnospace = 0pt minus 0pt plus 16000sp%
\multiply\afterclefnospace by \grefactor %
\relax %
}
